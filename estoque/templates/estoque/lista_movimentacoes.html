{% extends 'estoque/base.html' %}

{% block header %}Histórico Geral{% endblock %}

{% block content %}
<div class="bg-white shadow-md rounded-lg overflow-hidden">
    <table class="min-w-full leading-normal">
        <thead>
            <tr class="bg-gray-800 text-white text-sm uppercase">
                <th class="px-5 py-3 text-left">Data</th>
                <th class="px-5 py-3 text-left">Produto</th>
                <th class="px-5 py-3 text-left">Tipo</th>
                <th class="px-5 py-3 text-left">Usuário</th>
                <th class="px-5 py-3 text-center">Qtd</th>
            </tr>
        </thead>
        <tbody class="text-gray-700 text-sm">
            {% for mov in movimentacoes %}
            <tr class="border-b border-gray-200 hover:bg-gray-50">
                <td class="px-5 py-4">{{ mov.data|date:"d/m/Y H:i" }}</td>
                <td class="px-5 py-4 font-medium">{{ mov.produto.nome }}</td>
                <td class="px-5 py-4">
                    {% if mov.tipo == 'E' %}
                        <span class="bg-green-100 text-green-800 py-1 px-3 rounded-full text-xs font-bold">Entrada</span>
                    {% else %}
                        <span class="bg-red-100 text-red-800 py-1 px-3 rounded-full text-xs font-bold">Saída</span>
                    {% endif %}
                </td>
                <td class="px-5 py-4">{{ mov.usuario.username }}</td>
                <td class="px-5 py-4 text-center font-bold">
                    {% if mov.tipo == 'E' %}<span class="text-green-600">+{{ mov.quantidade }}</span>{% else %}<span class="text-red-600">-{{ mov.quantidade }}</span>{% endif %}
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="5" class="text-center py-6">Nenhuma movimentação registrada.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}